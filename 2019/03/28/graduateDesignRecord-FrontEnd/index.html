<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<title>毕业设计记录日志(FrontEnd:Vue) | Sirice&#39;s blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Sirice&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Sirice&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div id="post-toc" class="post-toc">
            <span class="post-toc-title">catalogue</span>
            <div class="post-toc-content">
                <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#目录结构"><span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题·难点"><span class="toc-text">问题·难点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#依赖的引入"><span class="toc-text">依赖的引入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认路由跳转"><span class="toc-text">默认路由跳转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#事件绑定"><span class="toc-text">事件绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#开发环境跨域配置"><span class="toc-text">开发环境跨域配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Promise-同步"><span class="toc-text">Promise 同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生产环境跨域配置"><span class="toc-text">生产环境跨域配置</span></a></li></ol></li></ol>
            </div>
        </div>
    
    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">毕业设计记录日志(FrontEnd:Vue)</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Sirice</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">March 28, 2019&nbsp;&nbsp;15:53:17</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/category/Graduation-Project/">Graduation Project</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <section class="post-content">
            <p>本项目来源于Github上一个<a href="https://github.com/yangshengjin/vueAdmin" target="_blank" rel="noopener">管理系统页面项目</a></p>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><details>
<summary>点击展开文件目录</summary>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">G:.</span><br><span class="line">│  .babelrc // ES6编译ES5配置信息</span><br><span class="line">│  .gitignore</span><br><span class="line">│  index.html // 主页入口</span><br><span class="line">│  package-lock.json</span><br><span class="line">│  package.json</span><br><span class="line">│  README.md</span><br><span class="line">│  </span><br><span class="line">├─build</span><br><span class="line">│      build.js</span><br><span class="line">│      check-versions.js</span><br><span class="line">│      dev-client.js</span><br><span class="line">│      dev-server.js</span><br><span class="line">│      utils.js</span><br><span class="line">│      webpack.base.conf.js</span><br><span class="line">│      webpack.dev.conf.js</span><br><span class="line">│      webpack.prod.conf.js</span><br><span class="line">│      </span><br><span class="line">├─config</span><br><span class="line">│      dev.env.js</span><br><span class="line">│      index.js</span><br><span class="line">│      prod.env.js</span><br><span class="line">│      </span><br><span class="line">│                  </span><br><span class="line">├─screenshots</span><br><span class="line">│      edit.jpg</span><br><span class="line">│      login.png</span><br><span class="line">│      main.png</span><br><span class="line">│      </span><br><span class="line">├─src</span><br><span class="line">│  │  App.vue // 主模块</span><br><span class="line">│  │  main.js // 程序入口加载配置脚本，此处进行import并注册组件、配置路由</span><br><span class="line">│  │  </span><br><span class="line">│  ├─api</span><br><span class="line">│  │      api.js</span><br><span class="line">│  │      index.js</span><br><span class="line">│  │      </span><br><span class="line">│  ├─assets</span><br><span class="line">│  │      </span><br><span class="line">│  ├─common</span><br><span class="line">│  │      util.js</span><br><span class="line">│  │      </span><br><span class="line">│  ├─mock</span><br><span class="line">│  │      index.js</span><br><span class="line">│  │      mock.js</span><br><span class="line">│  │      </span><br><span class="line">│  ├─mockdata</span><br><span class="line">│  │      user.js</span><br><span class="line">│  │      </span><br><span class="line">│  ├─pages</span><br><span class="line">│  │  │  Home.vue</span><br><span class="line">│  │  │  Login.vue</span><br><span class="line">│  │  │  Main.vue</span><br><span class="line">│  │  │  </span><br><span class="line">│  │  ├─charts</span><br><span class="line">│  │  │      echarts.vue</span><br><span class="line">│  │  │      </span><br><span class="line">│  │  ├─nav1</span><br><span class="line">│  │  │      Form.vue</span><br><span class="line">│  │  │      Table.vue</span><br><span class="line">│  │  │      user.vue</span><br><span class="line">│  │  │      </span><br><span class="line">│  │  ├─nav2</span><br><span class="line">│  │  │      Page4.vue</span><br><span class="line">│  │  │      Page5.vue</span><br><span class="line">│  │  │      </span><br><span class="line">│  │  └─nav3</span><br><span class="line">│  │          Page6.vue</span><br><span class="line">│  │          </span><br><span class="line">│  └─vuex</span><br><span class="line">│          actions.js</span><br><span class="line">│          getters.js</span><br><span class="line">│          store.js       </span><br><span class="line">└─static</span><br></pre></td></tr></table></figure>

</details>

<p>src根目录中两个文件app.vue和main.js</p>
<ul>
<li><code>./src/app.vue</code>: Vue项目主模块，不可随意更改。但本项目中明显经过改动，app.vue初始化后将路径替换为login。</li>
<li><code>./src/main.js</code>: 此处进行import并注册组件、配置路由</li>
</ul>
<hr>
<p>以上是通过其他人的项目学习目录结构的过程。。然而其他部分代码完全看不懂。。。因此还是自己创建一个项目从头做起吧。</p>
<h3 id="问题·难点"><a href="#问题·难点" class="headerlink" title="问题·难点"></a>问题·难点</h3><p>Vue框架不是很熟，目前对我而言难点有以下几个：</p>
<ul>
<li>跨域怎么解决</li>
<li>怎么保存登录对象的信息</li>
<li>怎么进行后端数据交互</li>
<li>组件怎么协作</li>
</ul>
<p>我创建这个项目的思路是框架选用Vue+ElementUI</p>
<h4 id="依赖的引入"><a href="#依赖的引入" class="headerlink" title="依赖的引入"></a>依赖的引入</h4><p>创建项目之后组建和上面相似的目录结构。创建时安装vue-router依赖。</p>
<p>根目录APP.vue和main.js不需要改,但这个项目中需要的Element组件库需要注册在主模块中。<br>进行<code>$ npm install element-ui</code>后需要在main.js中注册组件使用。</p>
<p>src/main.js添加这样几句：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main.js</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">'element-ui'</span> <span class="comment">// 导入Element组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// 样式需要单独添加，这个在官方文档中特意说了</span></span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI) <span class="comment">// 导入之后注册</span></span><br></pre></td></tr></table></figure>

<h4 id="默认路由跳转"><a href="#默认路由跳转" class="headerlink" title="默认路由跳转"></a>默认路由跳转</h4><p>更改路由（router/index.js)，想进入主界面直接进入登录，所以在路由中这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/router/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="comment">// 导入视图，也就是模块</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'@/components/login'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件注册</span></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由地址配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="comment">// 根目录自动跳转login视图</span></span><br><span class="line">      path: <span class="string">'/'</span>,</span><br><span class="line">      name: <span class="string">'Login'</span>,</span><br><span class="line">      component: Login, <span class="comment">// 注册上面导入的login组件</span></span><br><span class="line">      <span class="comment">// hidden: true//不显示在导航中</span></span><br><span class="line">    &#125;,  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在src/component文件夹中创建login.vue，template中直接使用Element提供的组件进行排版。（代码省略了，因为都是html排版）注意上面表单控件，使用v-model指令命名loginForm。这个命令会将表单化为变量。</p>
<h4 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h4><p>登录按钮中绑定事件login，但不是使用的v-on,因为这个指令在vue2.x中被弃用了。我们使用原生方法click，但框架中使用原生方法要注意后面会添加native。<code>@click.native=&quot;login&quot;</code></p>
<p>主要是下面的脚本部分：<br>上面按钮绑定事件login后，这是主动触发事件，要写在methods字段中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/components/login.vue</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span>;</span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">      login: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.loginForm.username || !<span class="keyword">this</span>.loginForm.password) &#123;</span><br><span class="line">          <span class="keyword">this</span>.$notify.error(<span class="string">"用户名或密码不能为空"</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="keyword">this</span>.loginForm.username + <span class="keyword">this</span>.loginForm.password);</span><br><span class="line">          <span class="comment">// this.$emit('Login',this.loginForm.username,this.loginForm.password)</span></span><br><span class="line">         <span class="keyword">let</span> postData = qs.stringify(&#123;</span><br><span class="line">           <span class="string">'username'</span>:<span class="keyword">this</span>.loginForm.username,</span><br><span class="line">           <span class="string">'password'</span>:<span class="keyword">this</span>.loginForm.password</span><br><span class="line">         &#125;);</span><br><span class="line"></span><br><span class="line">          axios.post(<span class="string">'/api/admin/login'</span>, postData).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(response)</span><br><span class="line">          &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(error);</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="comment">//localStorage.setItem('admin', JSON.stringify(res.msg));</span></span><br><span class="line">          <span class="comment">// this.$router.push('/home')</span></span><br><span class="line">          <span class="comment">// 页面跳转</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>上面这段代码主要注意两处：</p>
<p><strong>数据交互</strong>：使用axios，这是Vue推荐使用的ajax库。需要<code>$ npm install axios</code></p>
<p>使用ES6的导入语句，<code>const axios = require(&#39;axios&#39;);</code>这样下面可以使用axios作为常量调用方法，有点类似java的静态方法？</p>
<p>axios使用get或post方法，接受两个参数post(url,data),返回Promise对象，这个对象使用then()回调函数处理。</p>
<p><strong>序列化</strong>：如果直接axios提交数据后台接受到的全是null。。这个问题可能是提交的为引用，没有进行前端数据序列化。所以借助qs这个库进行预处理。这样就可以成功了。qs也需要npm install</p>
<p>现在还剩一个问题就是跨域，因为生产环境的Vue是自己有端口号的8081，后端的端口号是8080，需要在api将请求url自动替换为8080请求。因此要使用Vue的端口跨域。</p>
<h4 id="开发环境跨域配置"><a href="#开发环境跨域配置" class="headerlink" title="开发环境跨域配置"></a>开发环境跨域配置</h4><p>在生产环境中可以配置proxyTable字段进行映射。这个字段预留在根目录/config/index.js中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根目录/config/index.js</span></span><br><span class="line">proxyTable: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'http://localhost:8080'</span>,<span class="comment">//vue访问后台服务的端口</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<p>这段函数就是将前端请求url中所有api开头的都替换成<a href="http://localhost:8080。" target="_blank" rel="noopener">http://localhost:8080。</a><br>例如本例中<code>/api/admin/login</code>换成了<code>http://localhost:8080/admin/login</code>。</p>
<h4 id="Promise-同步"><a href="#Promise-同步" class="headerlink" title="Promise 同步"></a>Promise 同步</h4><p>axios为默认异步执行，在函数作用域外访问变量可能随时返回undefined，所以需要一个办法控制请求完成后执行。</p>
<p>Promise对象有两个参数resolve,reject，其中resolve为成功参数，reject为失败参数，可以有以下写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tabledata = getDass21historyList().then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;<span class="keyword">return</span> res.data&#125;);</span><br><span class="line">    resolve(tabledata); <span class="comment">// 异步改为同步，此时数据获取完毕。</span></span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.dass21history = res;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Promise对象中首先调用的resolve(data)为请求已成功，将data进行return，然后在then()中接收。如果被reject可以被catch()接收。这样axios的异步请求就转换为Promise的同步请求。</p>
<blockquote>
<p>参考文章：</p>
<p><a href="https://blog.csdn.net/qq_39861508/article/details/78925118" target="_blank" rel="noopener">前端踩坑小结:多个异步请求在同一个函数里面执行时的同步问题之promise的用法。CSDN博客</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/25198178" target="_blank" rel="noopener">深入 Promise(二)——进击的 Promise - 知乎</a></p>
</blockquote>
<h4 id="生产环境跨域配置"><a href="#生产环境跨域配置" class="headerlink" title="生产环境跨域配置"></a>生产环境跨域配置</h4><p><em>注意：本项目是Vue2.x在Springboot部署环境下的跨域配置，对其他环境的配置不一定起作用。</em></p>
<ol>
<li><p>将config/index.js中assetsPublicPath改为’./‘:</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \config\index.js</span></span><br><span class="line">build: &#123;</span><br><span class="line">   <span class="comment">// Template for index.html</span></span><br><span class="line">   index: path.resolve(__dirname, <span class="string">'../dist/index.html'</span>),</span><br><span class="line"></span><br><span class="line">   <span class="comment">// Paths</span></span><br><span class="line">   assetsRoot: path.resolve(__dirname, <span class="string">'../dist'</span>),</span><br><span class="line">   assetsSubDirectory: <span class="string">'static'</span>,</span><br><span class="line">   assetsPublicPath: <span class="string">'./'</span>, <span class="comment">// 修改这行，将'/'改为'./'</span></span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在build目录下utils.js下加入 publicPath: ‘…/…/‘：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// \build\utils.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// generate loader string to be used with extract text plugin</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateLoaders</span> (<span class="params">loader, loaderOptions</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> loaders = options.usePostCSS ? [cssLoader, postcssLoader] : [cssLoader]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Extract CSS when that option is specified</span></span><br><span class="line">  <span class="comment">// (which is the case during production build)</span></span><br><span class="line">  <span class="keyword">if</span> (options.extract) &#123;</span><br><span class="line">    <span class="keyword">return</span> ExtractTextPlugin.extract(&#123;</span><br><span class="line">      use: loaders,</span><br><span class="line">      fallback: <span class="string">'vue-style-loader'</span>,</span><br><span class="line">      publicPath:<span class="string">'../../'</span> <span class="comment">// 添加本行内容</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">'vue-style-loader'</span>].concat(loaders)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将前端api接口地址’/api’改成 . (点号)，当界面请求时，会在./user/register,会自动加前缀为当前后台地址</p>
<p> 在上一节开发环境中是在proxy中设置了代理地址替换规则，而生产环境中需要屏蔽掉那个规则，因此可以使用webpack的一个可以判断当前环境的变量来进行选择替换。这样生产环境和开发环境都可以正常跨域。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span>; <span class="comment">// qs 是参数经过处理将对象处理为url。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断当前环境</span></span><br><span class="line"><span class="comment">// let base = process.env.NODE_ENV === 'production' ?'生产环境地址':'开发环境地址';</span></span><br><span class="line"><span class="keyword">let</span> base = process.env.NODE_ENV === <span class="string">'production'</span> ?<span class="string">'.'</span>:<span class="string">'/api'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// admin</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> adminLogin = <span class="function"><span class="params">params</span> =&gt;</span> &#123; <span class="keyword">return</span> Axios.post(<span class="string">`<span class="subst">$&#123;base&#125;</span>/admin/login`</span>, qs.stringify(params)); &#125;;</span><br><span class="line"><span class="comment">// ...省略以下无关代码</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行<code>npm run build</code>,将生产后的打包文件夹中dist中的内容复制到<code>static</code>下，在Springboot中做一个地址映射就可以了</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.psytest.myproject.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  默认自动跳转index页面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">(HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"/index.html"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>

        </section>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Sirice</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://sirice19.github.io/2019/03/28/graduateDesignRecord-FrontEnd/">https://sirice19.github.io/2019/03/28/graduateDesignRecord-FrontEnd/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>本文采用<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享 署名-非商业性使用-禁止演绎(CC BY-NC-ND)国际许可协议</a>进行许可</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tag/FrontEnd/"># FrontEnd</a>
                    
                        <a href="/tag/Vue/"># Vue</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/03/31/thinkings-19Mar31/">结束这个混乱吧</a>
            
            
            <a class="next" rel="next" href="/2019/03/26/web-api-note/">Web API设计简要笔记</a>
            
        </section>


    </article>
</div>
        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Sirice | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Sirice19/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>
    </div>
</body>
</html>